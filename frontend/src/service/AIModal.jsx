// const {
//     GoogleGenerativeAI,
//     HarmCategory,
//     HarmBlockThreshold,
//   } = require("@google/generative-ai");
import {GoogleGenerativeAI} from "@google/generative-ai";
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
 
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for multiple locations based on length of cities - for each Location: {Goa, for 3 Days, latitude of 15.60444125, longitude of 74.00172406307475}, for family of 3 people with a Cheap budget. Give me a list of hotel options based on hotel preference with Hotel Name, Hotel Address, Price, Hotel Image URL, Geo Coordinates, Rating, and Description.\\nSuggest an itinerary based on pace preference including Place Name, Place Details, Place Image URL, Geo Coordinates, Ticket Pricing, Rating, Travel Time, and include daily food recommendations for meals (breakfast, lunch, dinner) for each location per city duration.\\nFor each day in the itinerary, provide:- Morning activity with breakfast details- Midday activity with lunch details- Afternoon activity - Evening activity with dinner details\\nProvide a daily plan with the best time to visit each place in JSON format.\\n\\nPlease provide the response in the following strict JSON format:\\n\\\"travelPlans\\\": [\\n\\n\\\"location\\\": \\\"Goa\\\",\\n\\\"duration\\\": \\\"3 Days\\\",\\\"travelerType\\\": \\\"Solo\\\",\\\"budget\\\": \\\"Cheap\\\"\"activities\": [\n  \"sightseeing\",\n  \"nightlife\",\n  \"custom:pottery\",\n  \"custom:Monuments\"\n],,\\n\\\"hotelOptions\\\": [{\\\"hotelName\\\": \\\"\\\",\\\"hotelAddress\\\": \\\"\\\",\\\"price\\\": \\\"\\\",\\\"hotelImageUrl\\\": \\\"\\\",\\\"coordinates\\\": {\\\"latitude\\\": 0,\\\"longitude\\\": 0},\\\"rating\\\": 0,\\\"description\\\": \\\"\\\"}],\\n\\\"itinerary\\\": [{\\\"day\\\": 1,\\\"theme\\\": \\\"Day Theme\\\",\\n\\\"morning\\\": {\\n\\\"activity\\\": {\\\"placeName\\\": \\\"\\\",\\\"placeDetails\\\": \\\"\\\",\\\"imageUrl\\\": \\\"\\\",\\\"coordinates\\\": {\\\"latitude\\\": 0,\\\"longitude\\\": 0},\\\"ticketPrice\\\": \\\"\\\",\\\"rating\\\": 0,\\\"bestTimeToVisit\\\": \\\"\\\",\\\"travelTime\\\": \\\"\\\"},\\n\\\"breakfast\\\": {\\\"restaurantName\\\": \\\"\\\",\\\"cuisine\\\": \\\"\\\",\\\"priceRange\\\": \\\"\\\",\\\"location\\\": \\\"\\\"}},\\n\\\"afternoon\\\": {\\\"activity\\\": {\\\"placeName\\\": \\\"\\\",\\\"placeDetails\\\": \\\"\\\",\\\"imageUrl\\\": \\\"\\\",\\\"coordinates\\\": {\\\"latitude\\\": 0,\\\"longitude\\\": 0},\\\"ticketPrice\\\": \\\"\\\",\\\"rating\\\": 0,\\\"bestTimeToVisit\\\": \\\"\\\",\\\"travelTime\\\": \\\"\\\"},\\n\\\"lunch\\\": {\\\"restaurantName\\\": \\\"\\\",\\\"cuisine\\\": \\\"\\\",\\\"priceRange\\\": \\\"\\\",\\\"location\\\": \\\"\\\"}},\\n\\\"evening\\\": {\\\"activity\\\": {\\\"placeName\\\": \\\"\\\",\\\"placeDetails\\\": \\\"\\\",\\\"imageUrl\\\": \\\"\\\",\\\"coordinates\\\": {\\\"latitude\\\": 0,\\\"longitude\\\": 0},\\\"ticketPrice\\\": \\\"\\\",\\\"rating\\\": 0,\\\"bestTimeToVisit\\\": \\\"\\\",\\\"travelTime\\\": \\\"\\\"},\\n\\\"dinner\\\": {\\\"restaurantName\\\": \\\"\\\",\\\"cuisine\\\": \\\"\\\",\\\"priceRange\\\": \\\"\\\",\\\"location\\\": \\\"\\\"}}}]\\ntotalCostEstimation:\\\"\\\" for Family of 3 people}]Please ensure each field follows this exact structure and naming convention. Fields should not be empty - use \\\"Not available\\\" if information is not applicable.also make sure the activities suggested by user are incorporated if possible \\n\\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"travelPlans\": [\n    {\n      \"location\": \"Goa\",\n      \"duration\": \"3 Days\",\n      \"travelerType\": \"Family of 3\",\n      \"budget\": \"Cheap\",\n      \"activities\": [\n        \"sightseeing\",\n        \"nightlife\",\n        \"custom:pottery\",\n        \"custom:Monuments\"\n      ],\n      \"hotelOptions\": [\n        {\n          \"hotelName\": \"Hotel Orion Anjuna\",\n          \"hotelAddress\": \"D'Mello Vaddo, Anjuna, Goa 403509, India\",\n          \"price\": \"₹1500 - ₹2500 per night\",\n          \"hotelImageUrl\": \"Not available\",\n          \"coordinates\": {\n            \"latitude\": 15.5744,\n            \"longitude\": 73.7478\n          },\n          \"rating\": 3.5,\n          \"description\": \"A budget-friendly option near Anjuna beach, offering basic amenities and comfortable rooms.\"\n        },\n        {\n          \"hotelName\": \"Red Fox Hotel Morjim, Goa\",\n          \"hotelAddress\": \"Vithaldas Waddo, Morjim, Goa 403512, India\",\n          \"price\": \"₹2000 - ₹3000 per night\",\n          \"hotelImageUrl\": \"Not available\",\n          \"coordinates\": {\n            \"latitude\": 15.6545,\n            \"longitude\": 73.7432\n          },\n          \"rating\": 4.0,\n          \"description\": \"A comfortable and affordable hotel in Morjim, known for its clean rooms and good service.\"\n        },\n        {\n          \"hotelName\": \"Backpacker Panda Goa\",\n          \"hotelAddress\": \"House No. 1656, Kumar Vaddo, Opposite St. Anthony Chapel, Anjuna Bardez, Goa, 403509, India\",\n          \"price\": \"₹500 - ₹1200 per night\",\n          \"hotelImageUrl\": \"Not available\",\n          \"coordinates\": {\n            \"latitude\": 15.5661,\n            \"longitude\": 73.7476\n          },\n          \"rating\": 3.8,\n          \"description\": \"Hostel with private room option. Offers an affordable stay, especially for those interested in meeting other travelers.\"\n        }\n      ],\n      \"itinerary\": [\n        {\n          \"day\": 1,\n          \"theme\": \"North Goa Beaches and Forts\",\n          \"morning\": {\n            \"activity\": {\n              \"placeName\": \"Aguada Fort\",\n              \"placeDetails\": \"A well-preserved 17th-century Portuguese fort offering panoramic views of the Arabian Sea and Mandovi River.\",\n              \"imageUrl\": \"Not available\",\n              \"coordinates\": {\n                \"latitude\": 15.4996,\n                \"longitude\": 73.7666\n              },\n              \"ticketPrice\": \"Free\",\n              \"rating\": 4.5,\n              \"bestTimeToVisit\": \"9:00 AM - 11:00 AM\",\n              \"travelTime\": \"30 mins from Panjim\"\n            },\n            \"breakfast\": {\n              \"restaurantName\": \"Infantaria\",\n              \"cuisine\": \"Continental, Goan\",\n              \"priceRange\": \"₹300-₹500\",\n              \"location\": \"Calangute\"\n            }\n          },\n          \"afternoon\": {\n            \"activity\": {\n              \"placeName\": \"Calangute Beach\",\n              \"placeDetails\": \"The largest beach in North Goa, known for its shacks, water sports, and lively atmosphere.\",\n              \"imageUrl\": \"Not available\",\n              \"coordinates\": {\n                \"latitude\": 15.5374,\n                \"longitude\": 73.7531\n              },\n              \"ticketPrice\": \"Free\",\n              \"rating\": 4.0,\n              \"bestTimeToVisit\": \"12:00 PM - 3:00 PM\",\n              \"travelTime\": \"15 mins from Aguada Fort\"\n            },\n            \"lunch\": {\n              \"restaurantName\": \"Souza Lobo\",\n              \"cuisine\": \"Seafood, Goan\",\n              \"priceRange\": \"₹500-₹800\",\n              \"location\": \"Calangute Beach\"\n            }\n          },\n          \"evening\": {\n            \"activity\": {\n              \"placeName\": \"Baga Beach\",\n              \"placeDetails\": \"Famous for its vibrant nightlife, shacks, and water sports.\",\n              \"imageUrl\": \"Not available\",\n              \"coordinates\": {\n                \"latitude\": 15.5567,\n                \"longitude\": 73.7500\n              },\n              \"ticketPrice\": \"Free\",\n              \"rating\": 4.2,\n              \"bestTimeToVisit\": \"6:00 PM - 9:00 PM\",\n              \"travelTime\": \"10 mins from Calangute Beach\"\n            },\n            \"dinner\": {\n              \"restaurantName\": \"Britto's\",\n              \"cuisine\": \"Seafood, Goan, Continental\",\n              \"priceRange\": \"₹800-₹1200\",\n              \"location\": \"Baga Beach\"\n            }\n          }\n        },\n        {\n          \"day\": 2,\n          \"theme\": \"South Goa Exploration and Pottery\",\n          \"morning\": {\n            \"activity\": {\n              \"placeName\": \"Shantadurga Temple\",\n              \"placeDetails\": \"A beautiful temple dedicated to Goddess Shantadurga, known for its unique architecture and serene atmosphere.\",\n              \"imageUrl\": \"Not available\",\n              \"coordinates\": {\n                \"latitude\": 15.4140,\n                \"longitude\": 73.9790\n              },\n              \"ticketPrice\": \"Free\",\n              \"rating\": 4.6,\n              \"bestTimeToVisit\": \"9:00 AM - 11:00 AM\",\n              \"travelTime\": \"1 hour from Panjim\"\n            },\n            \"breakfast\": {\n              \"restaurantName\": \"Vinayak Family Restaurant\",\n              \"cuisine\": \"Goan\",\n              \"priceRange\": \"₹200-₹400\",\n              \"location\": \"Near Margao\"\n            }\n          },\n          \"afternoon\": {\n            \"activity\": {\n              \"placeName\": \"Colva Beach\",\n              \"placeDetails\": \"One of the longest beaches in Goa, known for its white sands and scenic beauty.\",\n              \"imageUrl\": \"Not available\",\n              \"coordinates\": {\n                \"latitude\": 15.2740,\n                \"longitude\": 73.9580\n              },\n              \"ticketPrice\": \"Free\",\n              \"rating\": 4.3,\n              \"bestTimeToVisit\": \"12:00 PM - 3:00 PM\",\n              \"travelTime\": \"30 mins from Shantadurga Temple\"\n            },\n            \"lunch\": {\n              \"restaurantName\": \"Mickey's Colva\",\n              \"cuisine\": \"Seafood, Goan\",\n              \"priceRange\": \"₹500-₹800\",\n              \"location\": \"Colva Beach\"\n            }\n          },\n          \"evening\": {\n            \"activity\": {\n              \"placeName\": \"Arya Pottery\",\n              \"placeDetails\": \"A pottery center where you can learn about traditional Goan pottery and even try your hand at creating your own piece.\",\n              \"imageUrl\": \"Not available\",\n              \"coordinates\": {\n                \"latitude\": 15.2912,\n                \"longitude\": 73.9601\n              },\n              \"ticketPrice\": \"₹500 per person for workshop\",\n              \"rating\": 4.0,\n              \"bestTimeToVisit\": \"4:00 PM - 6:00 PM\",\n              \"travelTime\": \"10 mins from Colva Beach\"\n            },\n            \"dinner\": {\n              \"restaurantName\": \"The Fisherman's Wharf\",\n              \"cuisine\": \"Seafood, Goan, Continental\",\n              \"priceRange\": \"₹800-₹1200\",\n              \"location\": \"Cavelossim (near Colva)\"\n            }\n          }\n        },\n        {\n          \"day\": 3,\n          \"theme\": \"Panjim City and Dudhsagar Falls (Optional)\",\n          \"morning\": {\n            \"activity\": {\n              \"placeName\": \"Dudhsagar Falls (Optional - requires full day)\",\n              \"placeDetails\": \"A magnificent four-tiered waterfall located inside the Mollem National Park. Involves jeep safari and hiking. This is a whole day activity and may exceed the budget significantly depending on jeep costs.\",\n              \"imageUrl\": \"Not available\",\n              \"coordinates\": {\n                \"latitude\": 15.3138,\n                \"longitude\": 74.3126\n              },\n              \"ticketPrice\": \"Safari costs around ₹500 per person.\",\n              \"rating\": 4.7,\n              \"bestTimeToVisit\": \"9:00 AM - 11:00 AM (start early)\",\n              \"travelTime\": \"2 hours from Panjim\"\n            },\n            \"breakfast\": {\n              \"restaurantName\": \"Cafe Bhonsle\",\n              \"cuisine\": \"Goan, Indian\",\n              \"priceRange\": \"₹200-₹400\",\n              \"location\": \"Panjim\"\n            }\n          },\n          \"afternoon\": {\n            \"activity\": {\n              \"placeName\": \"If Dudhsagar not chosen: Basilica of Bom Jesus\",\n              \"placeDetails\": \"A UNESCO World Heritage Site, this church houses the mortal remains of St. Francis Xavier.\",\n              \"imageUrl\": \"Not available\",\n              \"coordinates\": {\n                \"latitude\": 15.5000,\n                \"longitude\": 73.8500\n              },\n              \"ticketPrice\": \"Free\",\n              \"rating\": 4.5,\n              \"bestTimeToVisit\": \"12:00 PM - 2:00 PM\",\n              \"travelTime\": \"30 mins from Panjim\"\n            },\n            \"lunch\": {\n              \"restaurantName\": \"Viva Panjim\",\n              \"cuisine\": \"Goan, Portuguese\",\n              \"priceRange\": \"₹500-₹800\",\n              \"location\": \"Panjim\"\n            }\n          },\n          \"evening\": {\n            \"activity\": {\n              \"placeName\": \"Casino Royale\",\n              \"placeDetails\": \"A floating casino on the Mandovi River, offering a range of games and entertainment.(Nightlife).\",\n              \"imageUrl\": \"Not available\",\n              \"coordinates\": {\n                \"latitude\": 15.4960,\n                \"longitude\": 73.8278\n              },\n              \"ticketPrice\": \"₹2000-₹4000 per person (includes entry and gaming chips)\",\n              \"rating\": 4.0,\n              \"bestTimeToVisit\": \"8:00 PM - 12:00 AM\",\n              \"travelTime\": \"5 mins from Panjim\"\n            },\n            \"dinner\": {\n              \"restaurantName\": \"The Black Sheep Bistro\",\n              \"cuisine\": \"European, Goan\",\n              \"priceRange\": \"₹800-₹1200\",\n              \"location\": \"Panjim\"\n            }\n          }\n        }\n      ],\n      \"totalCostEstimation\": \"₹15000 - ₹25000 for Family of 3 people (excluding Dudhsagar Falls jeep safari and Casino expenses)\"\n    }\n  ]\n}\n```"},
          ],
        },
      ],
    });
  
   